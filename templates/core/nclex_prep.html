{% extends 'core/base.html' %}

{% block title %}NCLEX Preparation - Nursing Study Aid{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">NCLEX Preparation</h1>
        <p class="text-gray-600 text-lg">Practice with NCLEX-style questions to prepare for your licensing exam</p>
    </div>

    <!-- Study Statistics -->
    <div class="grid md:grid-cols-4 gap-6 mb-12">
        <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-question-circle text-blue-600 text-2xl"></i>
            </div>
            <div class="text-3xl font-bold text-gray-800">{{ questions|length }}</div>
            <p class="text-gray-600">Practice Questions</p>
        </div>
        
        <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-check-circle text-green-600 text-2xl"></i>
            </div>
            <div class="text-3xl font-bold text-gray-800">0</div>
            <p class="text-gray-600">Correct Answers</p>
        </div>
        
        <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
            <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-percentage text-purple-600 text-2xl"></i>
            </div>
            <div class="text-3xl font-bold text-gray-800">0%</div>
            <p class="text-gray-600">Success Rate</p>
        </div>
        
        <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
            <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-clock text-orange-600 text-2xl"></i>
            </div>
            <div class="text-3xl font-bold text-gray-800">0</div>
            <p class="text-gray-600">Study Hours</p>
        </div>
    </div>

    <!-- NCLEX Categories -->
    <div class="mb-12">
        <h2 class="text-2xl font-bold text-gray-800 mb-8">NCLEX Categories</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="card-hover bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl p-6 text-center">
                <div class="w-16 h-16 bg-blue-200 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-shield-alt text-blue-600 text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2">Safe & Effective Care</h3>
                <p class="text-sm text-gray-600 mb-4">Management of care, safety, infection control</p>
                <div class="text-2xl font-bold text-blue-600">13-19%</div>
            </div>

            <div class="card-hover bg-gradient-to-br from-green-100 to-teal-100 rounded-2xl p-6 text-center">
                <div class="w-16 h-16 bg-green-200 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-heartbeat text-green-600 text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2">Health Promotion</h3>
                <p class="text-sm text-gray-600 mb-4">Growth & development, prevention</p>
                <div class="text-2xl font-bold text-green-600">6-12%</div>
            </div>

            <div class="card-hover bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl p-6 text-center">
                <div class="w-16 h-16 bg-purple-200 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-brain text-purple-600 text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2">Psychosocial Integrity</h3>
                <p class="text-sm text-gray-600 mb-4">Mental health, coping mechanisms</p>
                <div class="text-2xl font-bold text-purple-600">6-12%</div>
            </div>

            <div class="card-hover bg-gradient-to-br from-orange-100 to-red-100 rounded-2xl p-6 text-center">
                <div class="w-16 h-16 bg-orange-200 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-md text-orange-600 text-2xl"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-2">Physiological Integrity</h3>
                <p class="text-sm text-gray-600 mb-4">Basic care, pharmacology, reduction of risk</p>
                <div class="text-2xl font-bold text-orange-600">38-62%</div>
            </div>
        </div>
    </div>

    <!-- Practice Modes -->
    <div class="grid md:grid-cols-3 gap-8 mb-12">
        <div class="bg-white rounded-2xl p-8 shadow-lg text-center">
            <div class="w-20 h-20 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-play text-blue-600 text-3xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-4">Quick Practice</h3>
            <p class="text-gray-600 mb-6">Practice with 10 random questions</p>
            <button id="quick-practice" class="w-full bg-blue-500 text-white py-4 rounded-xl font-semibold hover:bg-blue-600 transition-colors">
                Start Practice
            </button>
        </div>

        <div class="bg-white rounded-2xl p-8 shadow-lg text-center">
            <div class="w-20 h-20 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-clipboard-list text-green-600 text-3xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-4">Category Focus</h3>
            <p class="text-gray-600 mb-6">Focus on specific NCLEX categories</p>
            <button id="category-practice" class="w-full bg-green-500 text-white py-4 rounded-xl font-semibold hover:bg-green-600 transition-colors">
                Choose Category
            </button>
        </div>

        <div class="bg-white rounded-2xl p-8 shadow-lg text-center">
            <div class="w-20 h-20 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-clock text-purple-600 text-3xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-4">Timed Exam</h3>
            <p class="text-gray-600 mb-6">Simulate real NCLEX conditions</p>
            <button id="timed-exam" class="w-full bg-purple-500 text-white py-4 rounded-xl font-semibold hover:bg-purple-600 transition-colors">
                Start Exam
            </button>
        </div>
    </div>

    <!-- Study Tips -->
    <div class="bg-gradient-to-r from-pink-100 to-purple-100 rounded-3xl p-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">NCLEX Success Tips</h2>
        <div class="grid md:grid-cols-2 gap-8">
            <div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">Study Strategies</h3>
                <ul class="space-y-3 text-gray-700">
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                        <span>Practice questions daily (75-100 questions)</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                        <span>Focus on rationales, not just correct answers</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                        <span>Review weak areas identified in practice</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                        <span>Use memory aids and mnemonics</span>
                    </li>
                </ul>
            </div>
            <div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">Test-Taking Tips</h3>
                <ul class="space-y-3 text-gray-700">
                    <li class="flex items-start">
                        <i class="fas fa-lightbulb text-yellow-500 mr-3 mt-1"></i>
                        <span>Read questions carefully and identify key words</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-lightbulb text-yellow-500 mr-3 mt-1"></i>
                        <span>Use ABC's (Airway, Breathing, Circulation)</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-lightbulb text-yellow-500 mr-3 mt-1"></i>
                        <span>Apply Maslow's hierarchy of needs</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-lightbulb text-yellow-500 mr-3 mt-1"></i>
                        <span>Consider safety first in all scenarios</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Practice Modal -->
<div id="practice-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 max-w-4xl mx-4 w-full max-h-screen overflow-y-auto">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-bold text-gray-800">NCLEX Practice Question</h3>
            <button id="close-practice-modal" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        
        <div id="practice-content">
            <!-- Practice questions will be loaded here -->
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const practiceModal = document.getElementById('practice-modal');
    const closePracticeBtn = document.getElementById('close-practice-modal');
    
    // Practice mode buttons
    document.getElementById('quick-practice').addEventListener('click', function() {
        startPractice('quick');
    });
    
    document.getElementById('category-practice').addEventListener('click', function() {
        startPractice('category');
    });
    
    document.getElementById('timed-exam').addEventListener('click', function() {
        startPractice('timed');
    });
    
    function startPractice(mode) {
        // This would typically load questions from the server
        const sampleQuestion = {
            question: "A client with heart failure is prescribed furosemide (Lasix). Which assessment finding indicates the medication is effective?",
            options: [
                "Decreased urine output",
                "Increased weight", 
                "Decreased edema",
                "Increased blood pressure"
            ],
            correct: 2,
            rationale: "Furosemide is a loop diuretic that removes excess fluid, reducing edema in heart failure patients."
        };
        
        displayQuestion(sampleQuestion);
        practiceModal.classList.remove('hidden');
        practiceModal.classList.add('flex');
    }
    
    function displayQuestion(question) {
        const content = document.getElementById('practice-content');
        content.innerHTML = `
            <div class="mb-8">
                <h4 class="text-xl font-bold text-gray-800 mb-6">${question.question}</h4>
                <div class="space-y-3">
                    ${question.options.map((option, index) => `
                        <button class="option-btn w-full text-left p-4 rounded-lg border-2 border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all" data-index="${index}">
                            <span class="font-bold mr-3">${String.fromCharCode(65 + index)}.</span>${option}
                        </button>
                    `).join('')}
                </div>
            </div>
            <div id="rationale" class="hidden bg-blue-50 rounded-lg p-6 mb-6">
                <h5 class="font-bold text-blue-800 mb-2">Rationale:</h5>
                <p class="text-blue-700">${question.rationale}</p>
            </div>
            <div class="flex justify-center">
                <button id="next-question" class="bg-blue-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors">
                    Next Question
                </button>
            </div>
        `;
        
        // Add event listeners to options
        content.querySelectorAll('.option-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const selectedIndex = parseInt(this.dataset.index);
                const isCorrect = selectedIndex === question.correct;
                
                // Disable all buttons
                content.querySelectorAll('.option-btn').forEach(b => b.disabled = true);
                
                // Show correct/incorrect styling
                if (isCorrect) {
                    this.classList.add('border-green-500', 'bg-green-100');
                } else {
                    this.classList.add('border-red-500', 'bg-red-100');
                    content.querySelectorAll('.option-btn')[question.correct].classList.add('border-green-500', 'bg-green-100');
                }
                
                // Show rationale
                document.getElementById('rationale').classList.remove('hidden');
            });
        });
    }
    
    closePracticeBtn.addEventListener('click', function() {
        practiceModal.classList.add('hidden');
        practiceModal.classList.remove('flex');
    });
    
    // Close modal when clicking outside
    practiceModal.addEventListener('click', function(e) {
        if (e.target === practiceModal) {
            practiceModal.classList.add('hidden');
            practiceModal.classList.remove('flex');
        }
    });
});
</script>
{% endblock %}